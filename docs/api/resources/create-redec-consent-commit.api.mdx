---
id: create-redec-consent-commit
title: "Crear un consent commit para REDEC"
description: "Crea un nuevo consent commit (múltiples acciones de consentimiento) a través del endpoint REDEC."
sidebar_label: "Crear un consent commit para REDEC"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: docs/api/resources/soyio-api
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Crear un consent commit para REDEC"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/redec/consent_commits"}
  context={"endpoint"}
>
  
</MethodEndpoint>



Crea un nuevo consent commit (múltiples acciones de consentimiento) a través del endpoint REDEC.
Este endpoint está diseñado específicamente para registrar múltiples consentimientos simultáneamente
en el contexto del cumplimiento normativo REDEC.

**Características:**
- Permite procesar múltiples action tokens en una sola solicitud
- Soporta tokens de cualquier tipo de template de consentimiento, pero al menos uno de ellos debe provenir de un template compatible con el REDEC

Debe proporcionar ya sea `entity_id` (para una entidad existente) o `user_reference` (para crear/encontrar una entidad).


<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={undefined}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["consent_actions","entity_nin"],"description":"Datos requeridos para crear un consent commit a través del endpoint REDEC","properties":{"consent_actions":{"type":"array","description":"Array de action tokens que contienen la información codificada de los consentimientos","minItems":1,"items":{"type":"object","required":["action_token"],"properties":{"action_token":{"type":"string","description":"Token de acción que contiene la información codificada del consentimiento","example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."}}}},"entity_nin":{"type":"string","description":"NIN (Número de Identificación Nacional) de la entidad","example":"12.345.678-5"},"executive_nin":{"type":"string","description":"NIN del ejecutivo que procesa la acción (opcional)","example":"11.111.111-1","nullable":true},"user_reference":{"type":"string","description":"Referencia del usuario en el sistema del cliente (se usa para crear o encontrar la entidad)","example":"redec-entity-123","nullable":true},"entity_id":{"type":"string","description":"ID de la entidad existente (alternativa a user_reference)","example":"ent_5F6Q6C2EwkXtkEpB1TlGjk","nullable":true},"consent_method":{"type":"object","description":"Método de captura del consentimiento. **Solo es requerido** si se crea el [action token a través de nuestra API](/docs/api/resources/create-action-token). En caso de usar nuestro embed, este campo no es necesario y **será ignorado**.","nullable":true,"allOf":[{"type":"object","description":"Método de captura del consentimiento. Es **requerido** si se crea el [action token a través de nuestra API](/docs/api/resources/create-action-token). En caso de usar nuestro embed, este campo no es necesario y **será ignorado**.","required":["channel"],"properties":{"channel":{"type":"string","description":"Canal de captura del consentimiento","enum":["website","chatbot","whatsapp"],"example":"website"},"capture_source":{"type":"string","description":"Nombre de la entidad plataforma usada para capturar el consentimiento","example":"Salesforce"},"metadata":{"type":"object","description":"Metadatos adicionales de la forma de captura del consentimiento. Pueden ser referencias a flujos completos (identificadores de chats, urls de tickets, etc.) o descripciones de la forma de captura.","example":{"details":"se le mostró al usuario el texto de consentimiento en un chatbot de whatsapp","chat_id":13928}}},"title":"EvidenceConsentMethod"},{"nullable":true}]}},"title":"ConsentCommitRedecInput"}}}}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"201":{"description":"Consent commit creado exitosamente","content":{"application/json":{"schema":{"type":"object","properties":{"consent_commit":{"x-tags":["Consent commits"],"description":"Agrupa una serie de acciones de consentimiento realizadas por un usuario","allOf":[{"x-tags":["Consent commits"],"type":"object","description":"Versión simplificada del commit de consentimiento para listados. No incluye campos show-only para optimizar el tamaño de la respuesta.","properties":{"id":{"type":"string","description":"Identificador único del consent commit","example":"ccom_1B2M2Y8AsgTpgAmY7PhCfg"},"user_reference":{"type":"string","description":"Referencia del usuario en el sistema del cliente","example":"user_123"},"entity_id":{"type":"string","description":"Identificador de la entidad asociada","example":"ent_1B2M2Y8AsgTpgAmY7PhCfg"},"context":{"type":"string","description":"Contexto adicional asociado al commit de consentimiento. Referencia al contexto de la primera acción de consentimiento","example":"web_signup","nullable":true},"contextual_data":{"type":"object","description":"Datos contextuales como IP, user agent, etc.","properties":{"ip":{"type":"string","example":"192.168.1.1"},"user_agent":{"type":"string","example":"Mozilla/5.0"},"url":{"type":"string","example":"https://example.com"},"phone_number":{"type":"string","example":"+56912345678"}},"title":"ContextualData"},"data_uses":{"type":"array","description":"Lista de usos de datos cubiertos por las acciones de consentimiento asociadas","items":{"type":"string"},"example":["essential","marketing"]},"consent_actions":{"type":"array","description":"Acciones de consentimiento asociadas al commit (versión simplificada)","items":{"x-tags":["Consent actions"],"type":"object","description":"Versión simplificada de la acción de consentimiento para listados. No incluye campos show-only para optimizar el tamaño de la respuesta.","properties":{"id":{"type":"string","description":"Identificador único de la acción de consentimiento","example":"consact_1B2M2Y8AsgTpgAmY7PhCfg"},"entity_id":{"type":"string","description":"Identificador de la entidad asociada. Puede ser nulo.","example":"ent_5F6Q6C2EwkXtkEpB1TlGjk","nullable":true},"user_reference":{"type":"string","description":"Referencia del usuario en el sistema del cliente","example":"user_123"},"consent_template_id":{"type":"string","description":"Identificador del template de consentimiento asociado.","example":"ctmpl_1B2M2Y8AsgTpgAmY7PhCfg"},"consent_commit_id":{"type":"string","description":"Identificador del commit de consentimiento asociado a este recurso, en caso de se haya originado a través de un commit. De lo contrario, es nulo.","example":"ccmt_1B2M2Y8AsgTpgAmY7PhCfg","nullable":true},"consent_template_name":{"type":"string","description":"Nombre de la plantilla de consentimiento asociado cuando no se expande la relación.","example":"Essential Services Template"},"context":{"type":"string","description":"Contexto adicional asociado a la acción de consentimiento","example":"web_signup","nullable":true},"kind":{"type":"string","description":"Tipo de acción realizada.","enum":["grant","revoke"],"example":"grant"},"data_use":{"type":"string","description":"Uso principal de datos asociado a la acción de consentimiento.","example":"essential"},"created_at":{"type":"string","format":"date-time","description":"Fecha y hora de creación de la acción de consentimiento","example":"2024-03-20T15:30:00Z"},"action_type":{"type":"string","description":"Tipo específico de acción","enum":["opt_in_click","voice_confirmation","physical_confirmation"],"example":"opt_in_click"},"action_data":{"type":"object","description":"Datos adicionales de la acción (máximo 4KB de tamaño serializado en JSON)","example":{"checkbox_id":"cb_123"}},"contextual_data":{"type":"object","description":"Datos contextuales como IP, user agent, etc.","properties":{"ip":{"type":"string","example":"192.168.1.1"},"user_agent":{"type":"string","example":"Mozilla/5.0"},"url":{"type":"string","example":"https://example.com"},"phone_number":{"type":"string","example":"+56912345678"}},"title":"ContextualData"}},"title":"ConsentActionIndex"}},"created_at":{"type":"string","format":"date-time","description":"Fecha y hora de creación del consent commit","example":"2024-03-20T15:30:00Z"}},"title":"ConsentCommitIndex"},{"type":"object","properties":{"evidence_id":{"type":"string","description":"Identificador de la evidencia generada por el acuerdo creado a partir del commit de consentimiento","example":"evd_wCntp5aXB5q7fKSthevwrw"},"agreement_id":{"type":"string","description":"Identificador del acuerdo generado por este commit de consentimiento","example":"agr_wCntp5aXB5q7fKSthevwrw","nullable":true},"agreement_version":{"type":"integer","description":"Versión del acuerdo generado por este commit de consentimiento","example":1,"nullable":true},"consent_actions":{"type":"array","description":"Acciones de consentimiento asociadas al commit (versión completa)","items":{"x-tags":["Consent actions"],"description":"Representa una acción de consentimiento realizada por un usuario","allOf":[{"x-tags":["Consent actions"],"type":"object","description":"Versión simplificada de la acción de consentimiento para listados. No incluye campos show-only para optimizar el tamaño de la respuesta.","properties":{"id":{"type":"string","description":"Identificador único de la acción de consentimiento","example":"consact_1B2M2Y8AsgTpgAmY7PhCfg"},"entity_id":{"type":"string","description":"Identificador de la entidad asociada. Puede ser nulo.","example":"ent_5F6Q6C2EwkXtkEpB1TlGjk","nullable":true},"user_reference":{"type":"string","description":"Referencia del usuario en el sistema del cliente","example":"user_123"},"consent_template_id":{"type":"string","description":"Identificador del template de consentimiento asociado.","example":"ctmpl_1B2M2Y8AsgTpgAmY7PhCfg"},"consent_commit_id":{"type":"string","description":"Identificador del commit de consentimiento asociado a este recurso, en caso de se haya originado a través de un commit. De lo contrario, es nulo.","example":"ccmt_1B2M2Y8AsgTpgAmY7PhCfg","nullable":true},"consent_template_name":{"type":"string","description":"Nombre de la plantilla de consentimiento asociado cuando no se expande la relación.","example":"Essential Services Template"},"context":{"type":"string","description":"Contexto adicional asociado a la acción de consentimiento","example":"web_signup","nullable":true},"kind":{"type":"string","description":"Tipo de acción realizada.","enum":["grant","revoke"],"example":"grant"},"data_use":{"type":"string","description":"Uso principal de datos asociado a la acción de consentimiento.","example":"essential"},"created_at":{"type":"string","format":"date-time","description":"Fecha y hora de creación de la acción de consentimiento","example":"2024-03-20T15:30:00Z"},"action_type":{"type":"string","description":"Tipo específico de acción","enum":["opt_in_click","voice_confirmation","physical_confirmation"],"example":"opt_in_click"},"action_data":{"type":"object","description":"Datos adicionales de la acción (máximo 4KB de tamaño serializado en JSON)","example":{"checkbox_id":"cb_123"}},"contextual_data":{"type":"object","description":"Datos contextuales como IP, user agent, etc.","properties":{"ip":{"type":"string","example":"192.168.1.1"},"user_agent":{"type":"string","example":"Mozilla/5.0"},"url":{"type":"string","example":"https://example.com"},"phone_number":{"type":"string","example":"+56912345678"}},"title":"ContextualData"}},"title":"ConsentActionIndex"},{"type":"object","properties":{"evidence_id":{"type":"string","description":"Identificador de la evidencia asociada al acuerdo generado por esta acción de consentimiento","example":"evd_wCntp5aXB5q7fKSthevwrw","nullable":true},"agreement_id":{"type":"string","description":"Identificador del acuerdo generado por esta acción de consentimiento","example":"agr_wCntp5aXB5q7fKSthevwrw","nullable":true},"agreement_version":{"type":"integer","description":"Versión del acuerdo generado por esta acción de consentimiento","example":1,"nullable":true},"data_categories":{"type":"array","description":"Lista de categorías de datos únicas cubiertas por el template de consentimiento asociado","items":{"type":"string"},"example":["user.name.first","user.contact.email"]}}}],"title":"ConsentAction"}}}}],"title":"ConsentCommit"}}}}}},"400":{"description":"Error en la solicitud (parámetros faltantes o inválidos)","content":{"application/json":{"schema":{"type":"object","properties":{"type":{"type":"string","example":"invalid_request_error"},"title":{"type":"string","example":"Bad Request"},"status":{"type":"integer","example":400},"detail":{"type":"string","example":"must include at least one redec compatible action token"}}}}}},"401":{"description":"Error de autenticación","content":{"application/json":{"schema":{"type":"object","required":["type","title","status","detail"],"properties":{"type":{"type":"string","example":"authentication_error"},"title":{"type":"string","example":"Unauthorized"},"status":{"type":"integer","example":401},"detail":{"type":"string","example":"We could not authenticate your credentials. Please check the documentation at https://docs.soyio.id"}}}}}},"403":{"description":"Funcionalidad REDEC no habilitada","content":{"application/json":{"schema":{"type":"object","properties":{"type":{"type":"string","example":"authentication_error"},"title":{"type":"string","example":"Forbidden"},"status":{"type":"integer","example":403},"detail":{"type":"string","example":"company is not configured for redec"}}}}}},"422":{"description":"Error de validación","content":{"application/json":{"schema":{"type":"object","required":["type","title","status","errors"],"properties":{"type":{"type":"string","example":"validation_error"},"title":{"type":"string","example":"Validation error"},"status":{"type":"integer","example":422},"errors":{"type":"array","items":{"type":"string"}}},"title":"ValidationError"}}}}}}
>
  
</StatusCodes>


      