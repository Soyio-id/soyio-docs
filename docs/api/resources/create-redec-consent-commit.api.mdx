---
id: create-redec-consent-commit
title: "Crear un consent commit para REDEC"
description: "Crea un nuevo consent commit (múltiples acciones de consentimiento) a través del endpoint REDEC."
sidebar_label: "Crear un consent commit para REDEC"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: docs/api/resources/soyio-api
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Crear un consent commit para REDEC"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/redec/consent_commits"}
  context={"endpoint"}
>
  
</MethodEndpoint>



Crea un nuevo consent commit (múltiples acciones de consentimiento) a través del endpoint REDEC.
Este endpoint está diseñado específicamente para registrar múltiples consentimientos simultáneamente
en el contexto del cumplimiento normativo REDEC.

**Características:**
- Permite procesar múltiples action tokens en una sola solicitud
- Soporta tokens de cualquier tipo de template de consentimiento, pero al menos uno de ellos debe provenir de un template compatible con el REDEC

Debe proporcionar ya sea `entity_id` (para una entidad existente) o `user_reference` (para crear/encontrar una entidad).


<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={undefined}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["consent_actions","entity_nin"],"description":"Datos requeridos para crear un consent commit a través del endpoint REDEC","properties":{"consent_actions":{"type":"array","description":"Array de action tokens que contienen la información codificada de los consentimientos","minItems":1,"items":{"type":"object","required":["action_token"],"properties":{"action_token":{"type":"string","description":"Token de acción que contiene la información codificada del consentimiento","example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."}}}},"entity_nin":{"type":"string","description":"NIN (Número de Identificación Nacional) de la entidad","example":"12.345.678-5"},"executive_nin":{"type":"string","description":"NIN del ejecutivo que procesa la acción (opcional)","example":"11.111.111-1","nullable":true},"user_reference":{"type":"string","description":"Referencia del usuario en el sistema del cliente (se usa para crear o encontrar la entidad)","example":"redec-entity-123","nullable":true},"entity_id":{"type":"string","description":"ID de la entidad existente (alternativa a user_reference)","example":"ent_5F6Q6C2EwkXtkEpB1TlGjk","nullable":true},"consent_method":{"allOf":[{"type":"object","description":"Método de captura del consentimiento. Es **requerido** si se crea el [action token a través de nuestra API](/docs/api/resources/create-action-token). En caso de usar nuestro embed, no es necesario proveer este campo.","required":["channel"],"properties":{"channel":{"type":"string","description":"Canal de captura del consentimiento","enum":["website","chatbot","whatsapp"],"example":"website"},"capture_source":{"type":"string","description":"Nombre de la entidad plataforma usada para capturar el consentimiento","example":"Salesforce"},"metadata":{"type":"object","description":"Metadatos adicionales de la forma de captura del consentimiento. Pueden ser referencias a flujos completos (identificadores de chats, urls de tickets, etc.) o descripciones de la forma de captura.","example":{"details":"se le mostró al usuario el texto de consentimiento en un chatbot de whatsapp","chat_id":13928}}},"title":"EvidenceConsentMethod"},{"nullable":true}]}},"title":"ConsentCommitRedecInput"}}}}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"201":{"description":"Consent commit creado exitosamente","content":{"application/json":{"schema":{"type":"object","properties":{"consent_commit":{"x-tags":["Consent commits"],"description":"Agrupa una serie de acciones de consentimiento realizadas por un usuario","allOf":[{"x-tags":["Consent commits"],"type":"object","description":"Versión simplificada del commit de consentimiento para listados. No incluye campos show-only para optimizar el tamaño de la respuesta.","properties":{"id":{"type":"string","description":"Identificador único del consent commit","example":"ccom_1B2M2Y8AsgTpgAmY7PhCfg"},"user_reference":{"type":"string","description":"Referencia del usuario en el sistema del cliente","example":"user_123"},"entity_id":{"type":"string","description":"Identificador de la entidad asociada","example":"ent_1B2M2Y8AsgTpgAmY7PhCfg"},"context":{"type":"string","description":"Contexto adicional asociado al commit de consentimiento. Referencia al contexto de la primera acción de consentimiento","example":"web_signup","nullable":true},"contextual_data":{"type":"object","description":"Datos contextuales como IP, user agent, etc.","properties":{"ip":{"type":"string","example":"192.168.1.1"},"user_agent":{"type":"string","example":"Mozilla/5.0"},"url":{"type":"string","example":"https://example.com"},"phone_number":{"type":"string","example":"+56912345678"}},"title":"ContextualData"},"data_uses":{"type":"array","description":"Lista de usos de datos cubiertos por las acciones de consentimiento asociadas","items":{"type":"string"},"example":["essential","marketing"]},"consent_actions":{"type":"array","description":"Acciones de consentimiento asociadas al commit (versión simplificada)","items":{"x-tags":["Consent actions"],"type":"object","description":"Versión simplificada de la acción de consentimiento para listados. No incluye campos show-only para optimizar el tamaño de la respuesta.","properties":{"id":{"type":"string","description":"Identificador único de la acción de consentimiento","example":"consact_1B2M2Y8AsgTpgAmY7PhCfg"},"entity_id":{"type":"string","description":"Identificador de la entidad asociada. Puede ser nulo.","example":"ent_5F6Q6C2EwkXtkEpB1TlGjk","nullable":true},"user_reference":{"type":"string","description":"Referencia del usuario en el sistema del cliente","example":"user_123"},"consent_template_id":{"type":"string","description":"Identificador del template de consentimiento asociado.","example":"ctmpl_1B2M2Y8AsgTpgAmY7PhCfg"},"consent_commit_id":{"type":"string","description":"Identificador del commit de consentimiento asociado a este recurso, en caso de se haya originado a través de un commit. De lo contrario, es nulo.","example":"ccmt_1B2M2Y8AsgTpgAmY7PhCfg","nullable":true},"consent_template_name":{"type":"string","description":"Nombre de la plantilla de consentimiento asociado cuando no se expande la relación.","example":"Essential Services Template"},"context":{"type":"string","description":"Contexto adicional asociado a la acción de consentimiento","example":"web_signup","nullable":true},"kind":{"type":"string","description":"Tipo de acción realizada.","enum":["grant","revoke"],"example":"grant"},"data_use":{"type":"string","description":"Uso principal de datos asociado a la acción de consentimiento.","example":"essential"},"created_at":{"type":"string","format":"date-time","description":"Fecha y hora de creación de la acción de consentimiento","example":"2024-03-20T15:30:00Z"},"action_type":{"type":"string","description":"Tipo específico de acción","enum":["opt_in_click","voice_confirmation"],"example":"opt_in_click"},"action_data":{"type":"object","description":"Datos adicionales de la acción (máximo 4KB de tamaño serializado en JSON)","example":{"checkbox_id":"cb_123"}},"contextual_data":{"type":"object","description":"Datos contextuales como IP, user agent, etc.","properties":{"ip":{"type":"string","example":"192.168.1.1"},"user_agent":{"type":"string","example":"Mozilla/5.0"},"url":{"type":"string","example":"https://example.com"},"phone_number":{"type":"string","example":"+56912345678"}},"title":"ContextualData"}},"title":"ConsentActionIndex"}},"created_at":{"type":"string","format":"date-time","description":"Fecha y hora de creación del consent commit","example":"2024-03-20T15:30:00Z"}},"title":"ConsentCommitIndex"},{"type":"object","properties":{"evidence_id":{"type":"string","description":"Identificador de la evidencia generada por el acuerdo creado a partir del commit de consentimiento","example":"evd_wCntp5aXB5q7fKSthevwrw"},"agreement_id":{"type":"string","description":"Identificador del acuerdo generado por este commit de consentimiento","example":"agr_wCntp5aXB5q7fKSthevwrw","nullable":true},"agreement_version":{"type":"integer","description":"Versión del acuerdo generado por este commit de consentimiento","example":1,"nullable":true},"consent_actions":{"type":"array","description":"Acciones de consentimiento asociadas al commit (versión completa)","items":{"x-tags":["Consent actions"],"description":"Representa una acción de consentimiento realizada por un usuario","allOf":[{"x-tags":["Consent actions"],"type":"object","description":"Versión simplificada de la acción de consentimiento para listados. No incluye campos show-only para optimizar el tamaño de la respuesta.","properties":{"id":{"type":"string","description":"Identificador único de la acción de consentimiento","example":"consact_1B2M2Y8AsgTpgAmY7PhCfg"},"entity_id":{"type":"string","description":"Identificador de la entidad asociada. Puede ser nulo.","example":"ent_5F6Q6C2EwkXtkEpB1TlGjk","nullable":true},"user_reference":{"type":"string","description":"Referencia del usuario en el sistema del cliente","example":"user_123"},"consent_template_id":{"type":"string","description":"Identificador del template de consentimiento asociado.","example":"ctmpl_1B2M2Y8AsgTpgAmY7PhCfg"},"consent_commit_id":{"type":"string","description":"Identificador del commit de consentimiento asociado a este recurso, en caso de se haya originado a través de un commit. De lo contrario, es nulo.","example":"ccmt_1B2M2Y8AsgTpgAmY7PhCfg","nullable":true},"consent_template_name":{"type":"string","description":"Nombre de la plantilla de consentimiento asociado cuando no se expande la relación.","example":"Essential Services Template"},"context":{"type":"string","description":"Contexto adicional asociado a la acción de consentimiento","example":"web_signup","nullable":true},"kind":{"type":"string","description":"Tipo de acción realizada.","enum":["grant","revoke"],"example":"grant"},"data_use":{"type":"string","description":"Uso principal de datos asociado a la acción de consentimiento.","example":"essential"},"created_at":{"type":"string","format":"date-time","description":"Fecha y hora de creación de la acción de consentimiento","example":"2024-03-20T15:30:00Z"},"action_type":{"type":"string","description":"Tipo específico de acción","enum":["opt_in_click","voice_confirmation"],"example":"opt_in_click"},"action_data":{"type":"object","description":"Datos adicionales de la acción (máximo 4KB de tamaño serializado en JSON)","example":{"checkbox_id":"cb_123"}},"contextual_data":{"type":"object","description":"Datos contextuales como IP, user agent, etc.","properties":{"ip":{"type":"string","example":"192.168.1.1"},"user_agent":{"type":"string","example":"Mozilla/5.0"},"url":{"type":"string","example":"https://example.com"},"phone_number":{"type":"string","example":"+56912345678"}},"title":"ContextualData"}},"title":"ConsentActionIndex"},{"type":"object","properties":{"evidence_id":{"type":"string","description":"Identificador de la evidencia asociada al acuerdo generado por esta acción de consentimiento","example":"evd_wCntp5aXB5q7fKSthevwrw","nullable":true},"agreement_id":{"type":"string","description":"Identificador del acuerdo generado por esta acción de consentimiento","example":"agr_wCntp5aXB5q7fKSthevwrw","nullable":true},"agreement_version":{"type":"integer","description":"Versión del acuerdo generado por esta acción de consentimiento","example":1,"nullable":true},"data_categories":{"type":"array","description":"Lista de categorías de datos únicas cubiertas por el template de consentimiento asociado","items":{"type":"string"},"example":["user.name.first","user.contact.email"]}}}],"title":"ConsentAction"}}}}],"title":"ConsentCommit"}}}}}},"400":{"description":"Error en la solicitud (parámetros faltantes o inválidos)","content":{"application/json":{"schema":{"type":"object","properties":{"type":{"type":"string","example":"invalid_request_error"},"title":{"type":"string","example":"Bad Request"},"status":{"type":"integer","example":400},"detail":{"type":"string","example":"must include at least one redec compatible action token"}}}}}},"401":{"description":"Error de autenticación","content":{"application/json":{"schema":{"type":"object","required":["type","title","status","detail"],"properties":{"type":{"type":"string","example":"authentication_error"},"title":{"type":"string","example":"Unauthorized"},"status":{"type":"integer","example":401},"detail":{"type":"string","example":"We could not authenticate your credentials. Please check the documentation at https://docs.soyio.id"}}}}}},"403":{"description":"Funcionalidad REDEC no habilitada","content":{"application/json":{"schema":{"type":"object","properties":{"type":{"type":"string","example":"authentication_error"},"title":{"type":"string","example":"Forbidden"},"status":{"type":"integer","example":403},"detail":{"type":"string","example":"company is not configured for redec"}}}}}},"422":{"description":"Error de validación","content":{"application/json":{"schema":{"type":"object","required":["type","title","status","errors"],"properties":{"type":{"type":"string","example":"validation_error"},"title":{"type":"string","example":"Validation error"},"status":{"type":"integer","example":422},"errors":{"type":"array","items":{"type":"string"}}},"title":"ValidationError"}}}}}}
>
  
</StatusCodes>


      