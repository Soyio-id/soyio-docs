---
id: create-redec-consent-commit
title: "Crear un consent commit para REDEC"
description: "Crea un nuevo consent commit (múltiples acciones de consentimiento) a través del endpoint REDEC."
sidebar_label: "Crear un consent commit para REDEC"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: docs/api/resources/soyio-api
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Crear un consent commit para REDEC"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/redec/consent_commits"}
  context={"endpoint"}
>
  
</MethodEndpoint>



Crea un nuevo consent commit (múltiples acciones de consentimiento) a través del endpoint REDEC.
Este endpoint está diseñado específicamente para registrar múltiples consentimientos simultáneamente
en el contexto del cumplimiento normativo REDEC.

**Características:**
- Permite procesar múltiples action tokens en una sola solicitud
- Soporta tokens de cualquier tipo de template de consentimiento, pero al menos uno de ellos debe provenir de un template compatible con el REDEC

Debe proporcionar ya sea `entity_id` (para una entidad existente) o `user_reference` (para crear/encontrar una entidad).


<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={undefined}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["consent_actions","entity_nin"],"description":"Datos requeridos para crear un consent commit a través del endpoint REDEC","properties":{"consent_actions":{"type":"array","description":"Array de action tokens que contienen la información codificada de los consentimientos","minItems":1,"items":{"type":"object","required":["action_token"],"properties":{"action_token":{"type":"string","description":"Token de acción que contiene la información codificada del consentimiento","example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."}}}},"entity_nin":{"type":"string","description":"NIN (Número de Identificación Nacional) de la entidad","example":"12.345.678-5"},"executive_nin":{"type":"string","description":"NIN del ejecutivo que procesa la acción (opcional)","example":"11.111.111-1","nullable":true},"user_reference":{"type":"string","description":"Referencia del usuario en el sistema del cliente (se usa para crear o encontrar la entidad)","example":"redec-entity-123","nullable":true},"entity_id":{"type":"string","description":"ID de la entidad existente (alternativa a user_reference)","example":"ent_5F6Q6C2EwkXtkEpB1TlGjk","nullable":true},"consent_method":{"type":"object","description":"Método de captura del consentimiento. **Solo es requerido** si se crea el [action token a través de nuestra API](/docs/api/resources/create-action-token). En caso de usar nuestro embed, este campo no es necesario y **será ignorado**.","nullable":true,"allOf":[{"type":"object","description":"Método de captura del consentimiento. Es **requerido** si se crea el [action token a través de nuestra API](/docs/api/resources/create-action-token). En caso de usar nuestro embed, este campo no es necesario y **será ignorado**.","required":["channel"],"properties":{"channel":{"type":"string","description":"Canal de captura del consentimiento","enum":["website","chatbot","whatsapp"],"example":"website"},"capture_source":{"type":"string","description":"Nombre de la entidad plataforma usada para capturar el consentimiento","example":"Salesforce"},"metadata":{"type":"object","description":"Metadatos adicionales de la forma de captura del consentimiento. Pueden ser referencias a flujos completos (identificadores de chats, urls de tickets, etc.) o descripciones de la forma de captura.","example":{"details":"se le mostró al usuario el texto de consentimiento en un chatbot de whatsapp","chat_id":13928}}},"title":"EvidenceConsentMethod"},{"nullable":true}]}},"title":"ConsentCommitRedecInput"}}}}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"201":{"description":"Consent commit creado exitosamente","content":{"application/json":{"schema":{"type":"object","properties":{"consent_commit":{"x-tags":["Consent commits"],"description":"Agrupa una serie de acciones de consentimiento realizadas por un usuario","allOf":[{"x-tags":["Consent commits"],"type":"object","description":"Versión simplificada del commit de consentimiento para listados. No incluye campos show-only para optimizar el tamaño de la respuesta.","properties":{"id":{"type":"string","description":"Identificador único del consent commit","example":"ccom_1B2M2Y8AsgTpgAmY7PhCfg"},"user_reference":{"type":"string","description":"Referencia del usuario en el sistema del cliente","example":"user_123"},"entity_id":{"type":"string","description":"Identificador de la entidad asociada","example":"ent_1B2M2Y8AsgTpgAmY7PhCfg"},"context":{"type":"string","description":"Contexto adicional asociado al commit de consentimiento. Referencia al contexto de la primera acción de consentimiento","example":"web_signup","nullable":true},"contextual_data":{"type":"object","description":"Datos contextuales como IP, user agent, etc.","properties":{"ip":{"type":"string","example":"192.168.1.1"},"user_agent":{"type":"string","example":"Mozilla/5.0"},"url":{"type":"string","example":"https://example.com"},"phone_number":{"type":"string","example":"+56912345678"}},"title":"ContextualData"},"data_uses":{"type":"array","description":"Lista de usos de datos cubiertos por las acciones de consentimiento asociadas","items":{"type":"string"},"example":["essential","marketing"]},"consent_actions":{"type":"array","description":"Acciones de consentimiento asociadas al commit (versión simplificada)","items":{"x-tags":["Consent actions"],"type":"object","description":"Versión simplificada de la acción de consentimiento para listados. No incluye campos show-only para optimizar el tamaño de la respuesta.","properties":{"id":{"type":"string","description":"Identificador único de la acción de consentimiento","example":"consact_1B2M2Y8AsgTpgAmY7PhCfg"},"entity_id":{"type":"string","description":"Identificador de la entidad asociada. Puede ser nulo.","example":"ent_5F6Q6C2EwkXtkEpB1TlGjk","nullable":true},"user_reference":{"type":"string","description":"Referencia del usuario en el sistema del cliente","example":"user_123"},"consent_template_id":{"type":"string","description":"Identificador del template de consentimiento asociado.","example":"ctmpl_1B2M2Y8AsgTpgAmY7PhCfg"},"consent_commit_id":{"type":"string","description":"Identificador del commit de consentimiento asociado a este recurso, en caso de se haya originado a través de un commit. De lo contrario, es nulo.","example":"ccmt_1B2M2Y8AsgTpgAmY7PhCfg","nullable":true},"consent_template_name":{"type":"string","description":"Nombre de la plantilla de consentimiento asociado cuando no se expande la relación.","example":"Essential Services Template"},"context":{"type":"string","description":"Contexto adicional asociado a la acción de consentimiento","example":"web_signup","nullable":true},"kind":{"type":"string","description":"Tipo de acción realizada.","enum":["grant","revoke"],"example":"grant"},"data_use":{"type":"string","description":"Uso principal de datos asociado a la acción de consentimiento.","example":"essential"},"created_at":{"type":"string","format":"date-time","description":"Fecha y hora de creación de la acción de consentimiento","example":"2024-03-20T15:30:00Z"},"action_type":{"type":"string","description":"Tipo específico de acción","enum":["opt_in_click","voice_confirmation","physical_confirmation"],"example":"opt_in_click"},"action_data":{"type":"object","description":"Datos adicionales de la acción (máximo 4KB de tamaño serializado en JSON)","example":{"checkbox_id":"cb_123"}},"contextual_data":{"type":"object","description":"Datos contextuales como IP, user agent, etc.","properties":{"ip":{"type":"string","example":"192.168.1.1"},"user_agent":{"type":"string","example":"Mozilla/5.0"},"url":{"type":"string","example":"https://example.com"},"phone_number":{"type":"string","example":"+56912345678"}},"title":"ContextualData"}},"title":"ConsentActionIndex"}},"created_at":{"type":"string","format":"date-time","description":"Fecha y hora de creación del consent commit","example":"2024-03-20T15:30:00Z"}},"title":"ConsentCommitIndex"},{"type":"object","properties":{"evidence_id":{"type":"string","description":"Identificador de la evidencia generada por el acuerdo creado a partir del commit de consentimiento","example":"evd_wCntp5aXB5q7fKSthevwrw"},"agreement_id":{"type":"string","description":"Identificador del acuerdo generado por este commit de consentimiento","example":"agr_wCntp5aXB5q7fKSthevwrw","nullable":true},"agreement_version":{"type":"integer","description":"Versión del acuerdo generado por este commit de consentimiento","example":1,"nullable":true},"consent_actions":{"type":"array","description":"Acciones de consentimiento asociadas al commit (versión completa)","items":{"x-tags":["Consent actions"],"description":"Representa una acción de consentimiento realizada por un usuario","allOf":[{"x-tags":["Consent actions"],"type":"object","description":"Versión simplificada de la acción de consentimiento para listados. No incluye campos show-only para optimizar el tamaño de la respuesta.","properties":{"id":{"type":"string","description":"Identificador único de la acción de consentimiento","example":"consact_1B2M2Y8AsgTpgAmY7PhCfg"},"entity_id":{"type":"string","description":"Identificador de la entidad asociada. Puede ser nulo.","example":"ent_5F6Q6C2EwkXtkEpB1TlGjk","nullable":true},"user_reference":{"type":"string","description":"Referencia del usuario en el sistema del cliente","example":"user_123"},"consent_template_id":{"type":"string","description":"Identificador del template de consentimiento asociado.","example":"ctmpl_1B2M2Y8AsgTpgAmY7PhCfg"},"consent_commit_id":{"type":"string","description":"Identificador del commit de consentimiento asociado a este recurso, en caso de se haya originado a través de un commit. De lo contrario, es nulo.","example":"ccmt_1B2M2Y8AsgTpgAmY7PhCfg","nullable":true},"consent_template_name":{"type":"string","description":"Nombre de la plantilla de consentimiento asociado cuando no se expande la relación.","example":"Essential Services Template"},"context":{"type":"string","description":"Contexto adicional asociado a la acción de consentimiento","example":"web_signup","nullable":true},"kind":{"type":"string","description":"Tipo de acción realizada.","enum":["grant","revoke"],"example":"grant"},"data_use":{"type":"string","description":"Uso principal de datos asociado a la acción de consentimiento.","example":"essential"},"created_at":{"type":"string","format":"date-time","description":"Fecha y hora de creación de la acción de consentimiento","example":"2024-03-20T15:30:00Z"},"action_type":{"type":"string","description":"Tipo específico de acción","enum":["opt_in_click","voice_confirmation","physical_confirmation"],"example":"opt_in_click"},"action_data":{"type":"object","description":"Datos adicionales de la acción (máximo 4KB de tamaño serializado en JSON)","example":{"checkbox_id":"cb_123"}},"contextual_data":{"type":"object","description":"Datos contextuales como IP, user agent, etc.","properties":{"ip":{"type":"string","example":"192.168.1.1"},"user_agent":{"type":"string","example":"Mozilla/5.0"},"url":{"type":"string","example":"https://example.com"},"phone_number":{"type":"string","example":"+56912345678"}},"title":"ContextualData"}},"title":"ConsentActionIndex"},{"type":"object","properties":{"evidence_id":{"type":"string","description":"Identificador de la evidencia asociada al acuerdo generado por esta acción de consentimiento","example":"evd_wCntp5aXB5q7fKSthevwrw","nullable":true},"agreement_id":{"type":"string","description":"Identificador del acuerdo generado por esta acción de consentimiento","example":"agr_wCntp5aXB5q7fKSthevwrw","nullable":true},"agreement_version":{"type":"integer","description":"Versión del acuerdo generado por esta acción de consentimiento","example":1,"nullable":true},"data_categories":{"type":"array","description":"Lista de categorías de datos únicas cubiertas por el template de consentimiento asociado","items":{"type":"string"},"example":["user.name.first","user.contact.email"]}}}],"title":"ConsentAction"}}}}],"title":"ConsentCommit"}}}}}},"400":{"description":"Error en la solicitud (parámetros faltantes o inválidos)","content":{"application/json":{"schema":{"type":"object","properties":{"type":{"type":"string","example":"invalid_request_error"},"title":{"type":"string","example":"Bad Request"},"status":{"type":"integer","example":400},"detail":{"type":"string","example":"must include at least one redec compatible action token"}}}}}},"401":{"description":"Error de autenticación","content":{"application/json":{"schema":{"type":"object","required":["type","title","status","detail"],"properties":{"type":{"type":"string","example":"authentication_error"},"title":{"type":"string","example":"Unauthorized"},"status":{"type":"integer","example":401},"detail":{"type":"string","example":"We could not authenticate your credentials. Please check the documentation at https://docs.soyio.id"}}}}}},"403":{"description":"Funcionalidad REDEC no habilitada","content":{"application/json":{"schema":{"type":"object","properties":{"type":{"type":"string","example":"authentication_error"},"title":{"type":"string","example":"Forbidden"},"status":{"type":"integer","example":403},"detail":{"type":"string","example":"company is not configured for redec"}}}}}},"422":{"description":"Error de validación","content":{"application/json":{"schema":{"type":"object","required":["type","title","status","errors"],"properties":{"type":{"type":"string","example":"validation_error"},"title":{"type":"string","example":"Validation error"},"status":{"type":"integer","example":422},"errors":{"type":"array","items":{"type":"string"}}},"title":"ValidationError"}}}}}}
>
  
</StatusCodes>


      