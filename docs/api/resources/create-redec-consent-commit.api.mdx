---
id: create-redec-consent-commit
title: "Crear un consent commit para REDEC"
description: "Crea un nuevo consent commit (múltiples acciones de consentimiento) a través del endpoint REDEC."
sidebar_label: "Crear un consent commit para REDEC"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: docs/api/resources/soyio-api
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Crear un consent commit para REDEC"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/redec/consent_commits"}
  context={"endpoint"}
>
  
</MethodEndpoint>



Crea un nuevo consent commit (múltiples acciones de consentimiento) a través del endpoint REDEC.
Este endpoint está diseñado específicamente para registrar múltiples consentimientos simultáneamente
en el contexto del cumplimiento normativo REDEC.

**Características:**
- Permite procesar múltiples action tokens en una sola solicitud
- Soporta tokens de cualquier tipo de template de consentimiento, pero al menos uno de ellos debe provenir de un template compatible con el REDEC

Debe proporcionar ya sea `entity_id` (para una entidad existente) o `user_reference` (para crear/encontrar una entidad).


<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={undefined}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["consent_actions","entity_nin"],"description":"Datos requeridos para crear un consent commit a través del endpoint REDEC","properties":{"consent_actions":{"type":"array","description":"Array de action tokens que contienen la información codificada de los consentimientos","minItems":1,"items":{"type":"object","required":["action_token"],"properties":{"action_token":{"type":"string","description":"Token de acción que contiene la información codificada del consentimiento","example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."}}}},"entity_nin":{"type":"string","description":"NIN (Número de Identificación Nacional) de la entidad","example":"12.345.678-5"},"executive_nin":{"type":"string","description":"NIN del ejecutivo que procesa la acción (opcional)","example":"11.111.111-1","nullable":true},"user_reference":{"type":"string","description":"Referencia del usuario en el sistema del cliente (se usa para crear o encontrar la entidad)","example":"redec-entity-123","nullable":true},"entity_id":{"type":"string","description":"ID de la entidad existente (alternativa a user_reference)","example":"ent_5F6Q6C2EwkXtkEpB1TlGjk","nullable":true},"consent_method":{"type":"object","description":"Método de captura del consentimiento. **Solo es requerido** si se crea el [action token a través de nuestra API](/docs/api/resources/create-action-token). En caso de usar nuestro embed, este campo no es necesario y **será ignorado**.","nullable":true,"allOf":[{"type":"object","description":"Método de captura del consentimiento. Es **requerido** si se crea el [action token a través de nuestra API](/docs/api/resources/create-action-token). En caso de usar nuestro embed, este campo no es necesario y **será ignorado**.","required":["channel"],"properties":{"channel":{"type":"string","description":"Canal de captura del consentimiento","enum":["website","chatbot","whatsapp"],"example":"website"},"capture_source":{"type":"string","description":"Nombre de la entidad plataforma usada para capturar el consentimiento","example":"Salesforce"},"metadata":{"type":"object","description":"Metadatos adicionales de la forma de captura del consentimiento. Pueden ser referencias a flujos completos (identificadores de chats, urls de tickets, etc.) o descripciones de la forma de captura.","example":{"details":"se le mostró al usuario el texto de consentimiento en un chatbot de whatsapp","chat_id":13928}}},"title":"EvidenceConsentMethod"},{"nullable":true}]}},"title":"ConsentCommitRedecInput"}}}}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"201":{"description":"Consent commit creado exitosamente","content":{"application/json":{"schema":{"type":"object","properties":{"consent_commit":{"x-tags":["Consent commits"],"description":"Agrupa una serie de acciones de consentimiento realizadas por un usuario","allOf":[{"x-tags":["Consent commits"],"type":"object","description":"Versión simplificada del commit de consentimiento para listados. No incluye campos show-only para optimizar el tamaño de la respuesta.","properties":{"id":{"type":"string","description":"Identificador único del consent commit","example":"ccom_1B2M2Y8AsgTpgAmY7PhCfg"},"user_reference":{"type":"string","description":"Referencia del usuario en el sistema del cliente","example":"user_123"},"entity_id":{"type":"string","description":"Identificador de la entidad asociada","example":"ent_1B2M2Y8AsgTpgAmY7PhCfg"},"context":{"type":"string","description":"Contexto adicional asociado al commit de consentimiento. Referencia al contexto de la primera acción de consentimiento","example":"web_signup","nullable":true},"contextual_data":{"type":"object","description":"Datos contextuales como IP, user agent, etc.","properties":{"ip":{"type":"string","example":"192.168.1.1"},"user_agent":{"type":"string","example":"Mozilla/5.0"},"url":{"type":"string","example":"https://example.com"},"phone_number":{"type":"string","example":"+56912345678"}},"title":"ContextualData"},"data_uses":{"type":"array","description":"Lista de usos de datos cubiertos por las acciones de consentimiento asociadas","items":{"type":"string"},"example":["essential","marketing"]},"consent_actions":{"type":"array","description":"Acciones de consentimiento asociadas al commit (versión simplificada)","items":{"x-tags":["Consent actions"],"type":"object","description":"Versión simplificada de la acción de consentimiento para listados. No incluye campos show-only para optimizar el tamaño de la respuesta.","properties":{"id":{"type":"string","description":"Identificador único de la acción de consentimiento","example":"consact_1B2M2Y8AsgTpgAmY7PhCfg"},"entity_id":{"type":"string","description":"Identificador de la entidad asociada. Puede ser nulo.","example":"ent_5F6Q6C2EwkXtkEpB1TlGjk","nullable":true},"user_reference":{"type":"string","description":"Referencia del usuario en el sistema del cliente","example":"user_123"},"consent_template_id":{"type":"string","description":"Identificador del template de consentimiento asociado.","example":"ctmpl_1B2M2Y8AsgTpgAmY7PhCfg"},"consent_commit_id":{"type":"string","description":"Identificador del commit de consentimiento asociado a este recurso, en caso de se haya originado a través de un commit. De lo contrario, es nulo.","example":"ccmt_1B2M2Y8AsgTpgAmY7PhCfg","nullable":true},"consent_template_name":{"type":"string","description":"Nombre de la plantilla de consentimiento asociado cuando no se expande la relación.","example":"Essential Services Template"},"consent_template_version":{"type":"integer","description":"Versión de la plantilla de consentimiento asociada cuando no se expande la relación.","example":1},"context":{"type":"string","description":"Contexto adicional asociado a la acción de consentimiento","example":"web_signup","nullable":true},"kind":{"type":"string","description":"Tipo de acción realizada.","enum":["grant","revoke"],"example":"grant"},"data_use":{"type":"string","description":"Uso principal de datos asociado a la acción de consentimiento.","example":"essential"},"created_at":{"type":"string","format":"date-time","description":"Fecha y hora de creación de la acción de consentimiento","example":"2024-03-20T15:30:00Z"},"action_type":{"type":"string","description":"Tipo específico de acción","enum":["opt_in_click","voice_confirmation","physical_confirmation"],"example":"opt_in_click"},"action_data":{"type":"object","description":"Datos adicionales de la acción (máximo 4KB de tamaño serializado en JSON)","example":{"checkbox_id":"cb_123"}},"contextual_data":{"type":"object","description":"Datos contextuales como IP, user agent, etc.","properties":{"ip":{"type":"string","example":"192.168.1.1"},"user_agent":{"type":"string","example":"Mozilla/5.0"},"url":{"type":"string","example":"https://example.com"},"phone_number":{"type":"string","example":"+56912345678"}},"title":"ContextualData"}},"title":"ConsentActionIndex"}},"created_at":{"type":"string","format":"date-time","description":"Fecha y hora de creación del consent commit","example":"2024-03-20T15:30:00Z"}},"title":"ConsentCommitIndex"},{"type":"object","properties":{"evidence_id":{"type":"string","description":"Identificador de la evidencia generada por el acuerdo creado a partir del commit de consentimiento","example":"evd_wCntp5aXB5q7fKSthevwrw"},"agreement_id":{"type":"string","description":"Identificador del acuerdo generado por este commit de consentimiento","example":"agr_wCntp5aXB5q7fKSthevwrw","nullable":true},"agreement_version":{"type":"integer","description":"Versión del acuerdo generado por este commit de consentimiento","example":1,"nullable":true},"consent_actions":{"type":"array","description":"Acciones de consentimiento asociadas al commit (versión completa)","items":{"x-tags":["Consent actions"],"description":"Representa una acción de consentimiento realizada por un usuario","allOf":[{"x-tags":["Consent actions"],"type":"object","description":"Versión simplificada de la acción de consentimiento para listados. No incluye campos show-only para optimizar el tamaño de la respuesta.","properties":{"id":{"type":"string","description":"Identificador único de la acción de consentimiento","example":"consact_1B2M2Y8AsgTpgAmY7PhCfg"},"entity_id":{"type":"string","description":"Identificador de la entidad asociada. Puede ser nulo.","example":"ent_5F6Q6C2EwkXtkEpB1TlGjk","nullable":true},"user_reference":{"type":"string","description":"Referencia del usuario en el sistema del cliente","example":"user_123"},"consent_template_id":{"type":"string","description":"Identificador del template de consentimiento asociado.","example":"ctmpl_1B2M2Y8AsgTpgAmY7PhCfg"},"consent_commit_id":{"type":"string","description":"Identificador del commit de consentimiento asociado a este recurso, en caso de se haya originado a través de un commit. De lo contrario, es nulo.","example":"ccmt_1B2M2Y8AsgTpgAmY7PhCfg","nullable":true},"consent_template_name":{"type":"string","description":"Nombre de la plantilla de consentimiento asociado cuando no se expande la relación.","example":"Essential Services Template"},"consent_template_version":{"type":"integer","description":"Versión de la plantilla de consentimiento asociada cuando no se expande la relación.","example":1},"context":{"type":"string","description":"Contexto adicional asociado a la acción de consentimiento","example":"web_signup","nullable":true},"kind":{"type":"string","description":"Tipo de acción realizada.","enum":["grant","revoke"],"example":"grant"},"data_use":{"type":"string","description":"Uso principal de datos asociado a la acción de consentimiento.","example":"essential"},"created_at":{"type":"string","format":"date-time","description":"Fecha y hora de creación de la acción de consentimiento","example":"2024-03-20T15:30:00Z"},"action_type":{"type":"string","description":"Tipo específico de acción","enum":["opt_in_click","voice_confirmation","physical_confirmation"],"example":"opt_in_click"},"action_data":{"type":"object","description":"Datos adicionales de la acción (máximo 4KB de tamaño serializado en JSON)","example":{"checkbox_id":"cb_123"}},"contextual_data":{"type":"object","description":"Datos contextuales como IP, user agent, etc.","properties":{"ip":{"type":"string","example":"192.168.1.1"},"user_agent":{"type":"string","example":"Mozilla/5.0"},"url":{"type":"string","example":"https://example.com"},"phone_number":{"type":"string","example":"+56912345678"}},"title":"ContextualData"}},"title":"ConsentActionIndex"},{"type":"object","properties":{"evidence_id":{"type":"string","description":"Identificador de la evidencia asociada al acuerdo generado por esta acción de consentimiento","example":"evd_wCntp5aXB5q7fKSthevwrw","nullable":true},"agreement_id":{"type":"string","description":"Identificador del acuerdo generado por esta acción de consentimiento","example":"agr_wCntp5aXB5q7fKSthevwrw","nullable":true},"agreement_version":{"type":"integer","description":"Versión del acuerdo generado por esta acción de consentimiento","example":1,"nullable":true},"data_categories":{"type":"array","description":"Lista de categorías de datos únicas cubiertas por el template de consentimiento asociado","items":{"type":"string"},"example":["user.name.first","user.contact.email"]}}}],"title":"ConsentAction"}}}}],"title":"ConsentCommit"}}}}}},"400":{"description":"Error en la solicitud (parámetros faltantes o inválidos)","content":{"application/json":{"schema":{"type":"object","properties":{"type":{"type":"string","example":"invalid_request_error"},"title":{"type":"string","example":"Bad Request"},"status":{"type":"integer","example":400},"detail":{"type":"string","example":"must include at least one redec compatible action token"}}}}}},"401":{"description":"Error de autenticación","content":{"application/json":{"schema":{"type":"object","required":["type","title","status","detail"],"properties":{"type":{"type":"string","example":"authentication_error"},"title":{"type":"string","example":"Unauthorized"},"status":{"type":"integer","example":401},"detail":{"type":"string","example":"We could not authenticate your credentials. Please check the documentation at https://docs.soyio.id"}}}}}},"403":{"description":"Funcionalidad REDEC no habilitada","content":{"application/json":{"schema":{"type":"object","properties":{"type":{"type":"string","example":"authentication_error"},"title":{"type":"string","example":"Forbidden"},"status":{"type":"integer","example":403},"detail":{"type":"string","example":"company is not configured for redec"}}}}}},"422":{"description":"Error de validación","content":{"application/json":{"schema":{"type":"object","required":["type","title","status","errors"],"properties":{"type":{"type":"string","example":"validation_error"},"title":{"type":"string","example":"Validation error"},"status":{"type":"integer","example":422},"errors":{"type":"array","items":{"type":"string"}}},"title":"ValidationError"}}}}}}
>
  
</StatusCodes>


      