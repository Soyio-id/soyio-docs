---
id: create-consent-action
title: "Crear un consent action"
description: "Crea un nuevo consent action. Debes proporcionar al menos uno de los siguientes parámetros: `user_reference` o `entity_id`."
sidebar_label: "Crear un consent action"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: docs/api/resources/soyio-api
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Crear un consent action"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/consent_actions"}
  context={"endpoint"}
>
  
</MethodEndpoint>



Crea un nuevo consent action. Debes proporcionar al menos uno de los siguientes parámetros: `user_reference` o `entity_id`.
- Si solo envías `user_reference`, se intentará buscar una entidad con dicho identificador y si no, se creará una.
- Si solo envías `entity_id`, se usará la entidad existente.
- Si envías ambos, se prioriza el `entity_id`. El `user_reference` solo se utiliza si no se entrega `entity_id`.


<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={undefined}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["action_token"],"properties":{"action_token":{"type":"string","description":"Token JWT de la acción de consentimiento","example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"},"user_reference":{"type":"string","description":"Referencia del usuario. Requerido si no se proporciona `entity_id`. Si se envía junto a `entity_id`, este último se prioriza.","example":"1234567890"},"entity_id":{"type":"string","description":"ID de la entidad existente. Requerido si no se proporciona `user_reference`. Si se envía junto a `user_reference`, se usará el `entity_id` para resolver la entidad.","example":"ent_1234567890"},"consent_method":{"type":"object","description":"Método de captura del consentimiento. Es **requerido** si se crea el [action token a través de nuestra API](/docs/api/resources/create-action-token). En caso de usar nuestro embed, este campo no es necesario y **será ignorado**.","required":["channel"],"properties":{"channel":{"type":"string","description":"Canal de captura del consentimiento","enum":["website","chatbot","whatsapp"],"example":"website"},"capture_source":{"type":"string","description":"Nombre de la entidad plataforma usada para capturar el consentimiento","example":"Salesforce"},"metadata":{"type":"object","description":"Metadatos adicionales de la forma de captura del consentimiento. Pueden ser referencias a flujos completos (identificadores de chats, urls de tickets, etc.) o descripciones de la forma de captura.","example":{"details":"se le mostró al usuario el texto de consentimiento en un chatbot de whatsapp","chat_id":13928}}},"title":"EvidenceConsentMethod"}}}}}}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"201":{"description":"Consent action creado","content":{"application/json":{"schema":{"x-tags":["Consent actions"],"description":"Representa una acción de consentimiento realizada por un usuario","allOf":[{"x-tags":["Consent actions"],"type":"object","description":"Versión simplificada de la acción de consentimiento para listados. No incluye campos show-only para optimizar el tamaño de la respuesta.","properties":{"id":{"type":"string","description":"Identificador único de la acción de consentimiento","example":"consact_1B2M2Y8AsgTpgAmY7PhCfg"},"entity_id":{"type":"string","description":"Identificador de la entidad asociada. Puede ser nulo.","example":"ent_5F6Q6C2EwkXtkEpB1TlGjk","nullable":true},"user_reference":{"type":"string","description":"Referencia del usuario en el sistema del cliente","example":"user_123"},"consent_template_id":{"type":"string","description":"Identificador del template de consentimiento asociado.","example":"ctmpl_1B2M2Y8AsgTpgAmY7PhCfg"},"consent_commit_id":{"type":"string","description":"Identificador del commit de consentimiento asociado a este recurso, en caso de se haya originado a través de un commit. De lo contrario, es nulo.","example":"ccmt_1B2M2Y8AsgTpgAmY7PhCfg","nullable":true},"consent_template_name":{"type":"string","description":"Nombre de la plantilla de consentimiento asociado cuando no se expande la relación.","example":"Essential Services Template"},"context":{"type":"string","description":"Contexto adicional asociado a la acción de consentimiento","example":"web_signup","nullable":true},"kind":{"type":"string","description":"Tipo de acción realizada.","enum":["grant","revoke"],"example":"grant"},"data_use":{"type":"string","description":"Uso principal de datos asociado a la acción de consentimiento.","example":"essential"},"created_at":{"type":"string","format":"date-time","description":"Fecha y hora de creación de la acción de consentimiento","example":"2024-03-20T15:30:00Z"},"action_type":{"type":"string","description":"Tipo específico de acción","enum":["opt_in_click","voice_confirmation","physical_confirmation"],"example":"opt_in_click"},"action_data":{"type":"object","description":"Datos adicionales de la acción (máximo 4KB de tamaño serializado en JSON)","example":{"checkbox_id":"cb_123"}},"contextual_data":{"type":"object","description":"Datos contextuales como IP, user agent, etc.","properties":{"ip":{"type":"string","example":"192.168.1.1"},"user_agent":{"type":"string","example":"Mozilla/5.0"},"url":{"type":"string","example":"https://example.com"},"phone_number":{"type":"string","example":"+56912345678"}},"title":"ContextualData"}},"title":"ConsentActionIndex"},{"type":"object","properties":{"evidence_id":{"type":"string","description":"Identificador de la evidencia asociada al acuerdo generado por esta acción de consentimiento","example":"evd_wCntp5aXB5q7fKSthevwrw","nullable":true},"agreement_id":{"type":"string","description":"Identificador del acuerdo generado por esta acción de consentimiento","example":"agr_wCntp5aXB5q7fKSthevwrw","nullable":true},"agreement_version":{"type":"integer","description":"Versión del acuerdo generado por esta acción de consentimiento","example":1,"nullable":true},"data_categories":{"type":"array","description":"Lista de categorías de datos únicas cubiertas por el template de consentimiento asociado","items":{"type":"string"},"example":["user.name.first","user.contact.email"]}}}],"title":"ConsentAction"}}}},"400":{"description":"Error de solicitud: falta la información mínima o los identificadores no coinciden con una entidad válida","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"object","properties":{"type":{"type":"string","example":"invalid_request_error"},"title":{"type":"string","example":"Bad Request"},"status":{"type":"integer","example":400},"detail":{"type":"string","examples":["Either user_reference or entity_id is required","Entity not found or does not belong to company"]}}}}}}}},"401":{"description":"Error de autenticación","content":{"application/json":{"schema":{"type":"object","required":["type","title","status","detail"],"properties":{"type":{"type":"string","example":"authentication_error"},"title":{"type":"string","example":"Unauthorized"},"status":{"type":"integer","example":401},"detail":{"type":"string","example":"We could not authenticate your credentials. Please check the documentation at https://docs.soyio.id"}}}}}}}}
>
  
</StatusCodes>


      