---
id: create-consent-action
title: "Crear un consent action"
description: "Crea un nuevo consent action. Debes proporcionar al menos uno de los siguientes parámetros: `user_reference` o `entity_id`."
sidebar_label: "Crear un consent action"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: docs/api/resources/soyio-api
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Crear un consent action"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/consent_actions"}
  context={"endpoint"}
>
  
</MethodEndpoint>



Crea un nuevo consent action. Debes proporcionar al menos uno de los siguientes parámetros: `user_reference` o `entity_id`.
- Si solo envías `user_reference`, se intentará buscar una entidad con dicho identificador y si no, se creará una.
- Si solo envías `entity_id`, se usará la entidad existente.
- Si envías ambos, se prioriza el `entity_id`. El `user_reference` solo se utiliza si no se entrega `entity_id`.


<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={undefined}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["action_token"],"properties":{"action_token":{"type":"string","description":"Token JWT de la acción de consentimiento","example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"},"user_reference":{"type":"string","description":"Referencia del usuario. Requerido si no se proporciona `entity_id`. Si se envía junto a `entity_id`, este último se prioriza.","example":"1234567890"},"entity_id":{"type":"string","description":"ID de la entidad existente. Requerido si no se proporciona `user_reference`. Si se envía junto a `user_reference`, se usará el `entity_id` para resolver la entidad.","example":"ent_1234567890"},"consent_method":{"type":"object","description":"Método de captura del consentimiento. Es **requerido** si se crea el [action token a través de nuestra API](/docs/api/resources/create-action-token). En caso de usar nuestro embed, no es necesario proveer este campo.","required":["channel"],"properties":{"channel":{"type":"string","description":"Canal de captura del consentimiento","enum":["website","chatbot","whatsapp"],"example":"website"},"capture_source":{"type":"string","description":"Nombre de la entidad plataforma usada para capturar el consentimiento","example":"Salesforce"},"metadata":{"type":"object","description":"Metadatos adicionales de la forma de captura del consentimiento. Pueden ser referencias a flujos completos (identificadores de chats, urls de tickets, etc.) o descripciones de la forma de captura.","example":{"details":"se le mostró al usuario el texto de consentimiento en un chatbot de whatsapp","chat_id":13928}}},"title":"EvidenceConsentMethod"}}}}}}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"201":{"description":"Consent action creado","content":{"application/json":{"schema":{"x-tags":["Consent actions"],"description":"Representa una acción de consentimiento realizada por un usuario","allOf":[{"x-tags":["Consent actions"],"type":"object","description":"Versión simplificada de la acción de consentimiento para listados. No incluye campos show-only para optimizar el tamaño de la respuesta.","properties":{"id":{"type":"string","description":"Identificador único de la acción de consentimiento","example":"consact_1B2M2Y8AsgTpgAmY7PhCfg"},"entity_id":{"type":"string","description":"Identificador de la entidad asociada. Puede ser nulo.","example":"ent_5F6Q6C2EwkXtkEpB1TlGjk","nullable":true},"user_reference":{"type":"string","description":"Referencia del usuario en el sistema del cliente","example":"user_123"},"consent_template_id":{"type":"string","description":"Identificador del template de consentimiento asociado.","example":"ctmpl_1B2M2Y8AsgTpgAmY7PhCfg"},"consent_commit_id":{"type":"string","description":"Identificador del commit de consentimiento asociado a este recurso, en caso de se haya originado a través de un commit. De lo contrario, es nulo.","example":"ccmt_1B2M2Y8AsgTpgAmY7PhCfg","nullable":true},"consent_template_name":{"type":"string","description":"Nombre de la plantilla de consentimiento asociado cuando no se expande la relación.","example":"Essential Services Template"},"context":{"type":"string","description":"Contexto adicional asociado a la acción de consentimiento","example":"web_signup","nullable":true},"kind":{"type":"string","description":"Tipo de acción realizada.","enum":["grant","revoke"],"example":"grant"},"data_use":{"type":"string","description":"Uso principal de datos asociado a la acción de consentimiento.","example":"essential"},"created_at":{"type":"string","format":"date-time","description":"Fecha y hora de creación de la acción de consentimiento","example":"2024-03-20T15:30:00Z"},"action_type":{"type":"string","description":"Tipo específico de acción","enum":["opt_in_click","voice_confirmation"],"example":"opt_in_click"},"action_data":{"type":"object","description":"Datos adicionales de la acción (máximo 4KB de tamaño serializado en JSON)","example":{"checkbox_id":"cb_123"}},"contextual_data":{"type":"object","description":"Datos contextuales como IP, user agent, etc.","properties":{"ip":{"type":"string","example":"192.168.1.1"},"user_agent":{"type":"string","example":"Mozilla/5.0"},"url":{"type":"string","example":"https://example.com"},"phone_number":{"type":"string","example":"+56912345678"}},"title":"ContextualData"}},"title":"ConsentActionIndex"},{"type":"object","properties":{"evidence_id":{"type":"string","description":"Identificador de la evidencia asociada al acuerdo generado por esta acción de consentimiento","example":"evd_wCntp5aXB5q7fKSthevwrw","nullable":true},"agreement_id":{"type":"string","description":"Identificador del acuerdo generado por esta acción de consentimiento","example":"agr_wCntp5aXB5q7fKSthevwrw","nullable":true},"agreement_version":{"type":"integer","description":"Versión del acuerdo generado por esta acción de consentimiento","example":1,"nullable":true},"data_categories":{"type":"array","description":"Lista de categorías de datos únicas cubiertas por el template de consentimiento asociado","items":{"type":"string"},"example":["user.name.first","user.contact.email"]}}}],"title":"ConsentAction"}}}},"400":{"description":"Error de solicitud: falta la información mínima o los identificadores no coinciden con una entidad válida","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"object","properties":{"type":{"type":"string","example":"invalid_request_error"},"title":{"type":"string","example":"Bad Request"},"status":{"type":"integer","example":400},"detail":{"type":"string","examples":["Either user_reference or entity_id is required","Entity not found or does not belong to company"]}}}}}}}},"401":{"description":"Error de autenticación","content":{"application/json":{"schema":{"type":"object","required":["type","title","status","detail"],"properties":{"type":{"type":"string","example":"authentication_error"},"title":{"type":"string","example":"Unauthorized"},"status":{"type":"integer","example":401},"detail":{"type":"string","example":"We could not authenticate your credentials. Please check the documentation at https://docs.soyio.id"}}}}}}}}
>
  
</StatusCodes>


      