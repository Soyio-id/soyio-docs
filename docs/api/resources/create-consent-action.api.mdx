---
id: create-consent-action
title: "Crear un consent action"
description: "Crea un nuevo consent action. Debes proporcionar al menos uno de los siguientes parámetros: `user_reference` o `entity_id`."
sidebar_label: "Crear un consent action"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: docs/api/resources/soyio-api
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Crear un consent action"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/consent_actions"}
  context={"endpoint"}
>
  
</MethodEndpoint>



Crea un nuevo consent action. Debes proporcionar al menos uno de los siguientes parámetros: `user_reference` o `entity_id`.
- Si solo envías `user_reference`, se intentará buscar una entidad con dicho identificador y si no, se creará una.
- Si solo envías `entity_id`, se usará la entidad existente.
- Si envías ambos, se prioriza el `entity_id`. El `user_reference` solo se utiliza si no se entrega `entity_id`.


<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={undefined}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["action_token"],"properties":{"action_token":{"type":"string","description":"Token JWT de la acción de consentimiento","example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"},"user_reference":{"type":"string","description":"Referencia del usuario. Requerido si no se proporciona `entity_id`. Si se envía junto a `entity_id`, este último se prioriza.","example":"1234567890"},"entity_id":{"type":"string","description":"ID de la entidad existente. Requerido si no se proporciona `user_reference`. Si se envía junto a `user_reference`, se usará el `entity_id` para resolver la entidad.","example":"ent_1234567890"},"consent_method":{"type":"object","description":"Método de captura del consentimiento. Es **requerido** si se crea el [action token a través de nuestra API](/docs/api/resources/create-action-token). En caso de usar nuestro embed, este campo no es necesario y **será ignorado**.","required":["channel"],"properties":{"channel":{"type":"string","description":"Canal de captura del consentimiento","enum":["website","chatbot","whatsapp"],"example":"website"},"capture_source":{"type":"string","description":"Nombre de la entidad plataforma usada para capturar el consentimiento","example":"Salesforce"},"metadata":{"type":"object","description":"Metadatos adicionales de la forma de captura del consentimiento. Pueden ser referencias a flujos completos (identificadores de chats, urls de tickets, etc.) o descripciones de la forma de captura.","example":{"details":"se le mostró al usuario el texto de consentimiento en un chatbot de whatsapp","chat_id":13928}}},"title":"EvidenceConsentMethod"}}}}}}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"201":{"description":"Consent action creado","content":{"application/json":{"schema":{"x-tags":["Consent actions"],"description":"Representa una acción de consentimiento realizada por un usuario","allOf":[{"type":"object","description":"Versión simplificada de la acción de consentimiento para listados. No incluye campos show-only para optimizar el tamaño de la respuesta.","properties":{"id":{"type":"string","description":"Identificador único de la acción de consentimiento","example":"consact_1B2M2Y8AsgTpgAmY7PhCfg"},"entity_id":{"type":"string","description":"Identificador de la entidad asociada. Puede ser nulo.","example":"ent_5F6Q6C2EwkXtkEpB1TlGjk","nullable":true},"user_reference":{"type":"string","description":"Referencia del usuario en el sistema del cliente","example":"user_123"},"consent_template_id":{"type":"string","description":"Identificador del template de consentimiento asociado.","example":"ctmpl_1B2M2Y8AsgTpgAmY7PhCfg"},"consent_commit_id":{"type":"string","description":"Identificador del commit de consentimiento asociado a este recurso, en caso de se haya originado a través de un commit. De lo contrario, es nulo.","example":"ccmt_1B2M2Y8AsgTpgAmY7PhCfg","nullable":true},"consent_template_name":{"type":"string","description":"Nombre de la plantilla de consentimiento asociado cuando no se expande la relación.","example":"Essential Services Template"},"consent_template_version":{"type":"integer","description":"Versión de la plantilla de consentimiento asociada cuando no se expande la relación.","example":1},"context":{"type":"string","description":"Contexto adicional asociado a la acción de consentimiento","example":"web_signup","nullable":true},"kind":{"type":"string","description":"Tipo de acción realizada.","enum":["grant","revoke"],"example":"grant"},"data_use":{"type":"string","description":"Uso principal de datos asociado a la acción de consentimiento.","example":"essential"},"created_at":{"type":"string","format":"date-time","description":"Fecha y hora de creación de la acción de consentimiento","example":"2024-03-20T15:30:00Z"},"action_type":{"type":"string","description":"Tipo específico de acción","enum":["opt_in_click","voice_confirmation","physical_confirmation"],"example":"opt_in_click"},"action_data":{"type":"object","description":"Datos adicionales de la acción (máximo 4KB de tamaño serializado en JSON)","example":{"checkbox_id":"cb_123"}},"contextual_data":{"type":"object","description":"Datos contextuales como IP, user agent, etc.","properties":{"ip":{"type":"string","example":"192.168.1.1"},"user_agent":{"type":"string","example":"Mozilla/5.0"},"url":{"type":"string","example":"https://example.com"},"phone_number":{"type":"string","example":"+56912345678"}},"title":"ContextualData"}},"title":"ConsentActionIndex"},{"type":"object","properties":{"evidence_id":{"type":"string","description":"Identificador de la evidencia asociada al acuerdo generado por esta acción de consentimiento","example":"evd_wCntp5aXB5q7fKSthevwrw","nullable":true},"agreement_id":{"type":"string","description":"Identificador del acuerdo generado por esta acción de consentimiento","example":"agr_wCntp5aXB5q7fKSthevwrw","nullable":true},"agreement_version":{"type":"integer","description":"Versión del acuerdo generado por esta acción de consentimiento","example":1,"nullable":true},"data_categories":{"type":"array","description":"Lista de categorías de datos únicas cubiertas por el template de consentimiento asociado","items":{"type":"string"},"example":["user.name.first","user.contact.email"]}}}],"title":"ConsentAction"}}}},"400":{"description":"Error de solicitud: falta la información mínima o los identificadores no coinciden con una entidad válida","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"object","properties":{"type":{"type":"string","example":"invalid_request_error"},"title":{"type":"string","example":"Bad Request"},"status":{"type":"integer","example":400},"detail":{"type":"string","examples":["Either user_reference or entity_id is required","Entity not found or does not belong to company"]}}}}}}}},"401":{"description":"Error de autenticación","content":{"application/json":{"schema":{"type":"object","required":["type","title","status","detail"],"properties":{"type":{"type":"string","example":"authentication_error"},"title":{"type":"string","example":"Unauthorized"},"status":{"type":"integer","example":401},"detail":{"type":"string","example":"We could not authenticate your credentials. Please check the documentation at https://docs.soyio.id"}}}}}}}}
>
  
</StatusCodes>


      