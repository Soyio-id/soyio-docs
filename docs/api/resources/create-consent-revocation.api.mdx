---
id: create-consent-revocation
title: "Crear una revocación de consentimiento iniciada por la empresa"
description: "Revoca permisos de consentimiento por lógica de negocio de la empresa (por ejemplo, fin de contrato u obligación)."
sidebar_label: "Crear una revocación de consentimiento iniciada por la empresa"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: docs/api/resources/soyio-api
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Crear una revocación de consentimiento iniciada por la empresa"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/consent_revocations"}
  context={"endpoint"}
>
  
</MethodEndpoint>



Revoca permisos de consentimiento por lógica de negocio de la empresa (por ejemplo, fin de contrato u obligación).
Esta operación no representa un clic del usuario y crea un registro `CompanyConsentRevocation` como fuente de versión.

Reglas principales:
- El `consent_template` debe tener `duration_type=conditional`.
- El template debe tener `revocable_data_uses` configurado.
- `selected_scopes`, si se envía, debe ser subconjunto de los scopes del template.
- Si no hay permisos efectivamente revocables, responde exitosamente con estado `no_changes`.


<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={undefined}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["consent_template_id","reason_code","origin_event"],"properties":{"identity_id":{"type":"string","description":"Identificador de identidad a revocar. No puede combinarse con `entity_id` ni `user_reference`.","example":"id_1B2M2Y8AsgTpgAmY7PhCfg"},"entity_id":{"type":"string","description":"Identificador de entidad a revocar. Se prioriza sobre `user_reference`.","example":"ent_1B2M2Y8AsgTpgAmY7PhCfg"},"user_reference":{"type":"string","description":"Referencia de usuario para resolver la entidad cuando no se entrega `entity_id`.","example":"user_123"},"consent_template_id":{"type":"string","description":"Identificador del template de consentimiento.","example":"constpl_1B2M2Y8AsgTpgAmY7PhCfg"},"consent_template_version":{"type":"integer","nullable":true,"description":"Versión específica del template. Si se omite, usa latest.","example":3},"selected_scopes":{"type":"array","description":"Subconjunto de scopes a revocar. Si se omite, intenta revocar todos los scopes del template,\nrespetando los guardrails de `revocable_data_uses`.\n","items":{"type":"object","required":["scope_type","scope_id","scope_version"],"properties":{"scope_type":{"type":"string","enum":["product","branch"],"description":"Tipo de ámbito.","example":"product"},"scope_id":{"type":"string","description":"Identificador público tokenizado del recurso scope.","example":"prod_1B2M2Y8AsgTpgAmY7PhCfg"},"scope_version":{"type":"integer","description":"Versión del recurso scope persistida en esta versión del template.\nEste valor queda fijado al guardar y no se actualiza automáticamente cuando aparecen nuevas versiones del scope.\n","example":1}},"title":"ConsentTemplateScope"}},"reason_code":{"type":"string","description":"Código de motivo de revocación definido por la empresa.","example":"contract_ended"},"reason_text":{"type":"string","nullable":true,"description":"Texto libre opcional con más contexto.","example":"Contrato finalizado en sistema core"},"origin_event":{"type":"object","required":["system","event_id"],"properties":{"system":{"type":"string","description":"Sistema origen que dispara la revocación.","example":"core-banking"},"event_id":{"type":"string","description":"Identificador idempotente del evento origen.","example":"evt-12345"},"occurred_at":{"type":"string","format":"date-time","nullable":true,"description":"Fecha/hora de ocurrencia del evento origen.","example":"2026-02-11T15:10:00Z"}},"title":"ConsentRevocationOriginEvent"}},"title":"ConsentRevocationCreateInput"}}}}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"Evento idempotente ya procesado previamente","content":{"application/json":{"schema":{"type":"object","properties":{"consent_revocation":{"x-tags":["Consent revocations"],"type":"object","required":["id","subject_id","subject_type","consent_template_id","consent_template_version","reason_code","origin_event","status","created_at"],"properties":{"id":{"type":"string","description":"Identificador único de la revocación iniciada por la empresa.","example":"ccrev_1B2M2Y8AsgTpgAmY7PhCfg"},"subject_id":{"type":"string","description":"Identificador del sujeto afectado (`ent_` o `id_`).","example":"ent_1B2M2Y8AsgTpgAmY7PhCfg"},"subject_type":{"type":"string","enum":["Entity","Identity"],"example":"Entity"},"consent_template_id":{"type":"string","description":"Identificador del template de consentimiento.","example":"constpl_1B2M2Y8AsgTpgAmY7PhCfg"},"consent_template_version":{"type":"integer","example":3},"selected_scopes":{"type":"array","nullable":true,"items":{"type":"object","required":["scope_type","scope_id","scope_version"],"properties":{"scope_type":{"type":"string","enum":["product","branch"],"description":"Tipo de ámbito.","example":"product"},"scope_id":{"type":"string","description":"Identificador público tokenizado del recurso scope.","example":"prod_1B2M2Y8AsgTpgAmY7PhCfg"},"scope_version":{"type":"integer","description":"Versión del recurso scope persistida en esta versión del template.\nEste valor queda fijado al guardar y no se actualiza automáticamente cuando aparecen nuevas versiones del scope.\n","example":1}},"title":"ConsentTemplateScope"}},"reason_code":{"type":"string","example":"contract_ended"},"reason_text":{"type":"string","nullable":true,"example":"Contrato finalizado en sistema core"},"origin_event":{"type":"object","required":["system","event_id"],"properties":{"system":{"type":"string","description":"Sistema origen que dispara la revocación.","example":"core-banking"},"event_id":{"type":"string","description":"Identificador idempotente del evento origen.","example":"evt-12345"},"occurred_at":{"type":"string","format":"date-time","nullable":true,"description":"Fecha/hora de ocurrencia del evento origen.","example":"2026-02-11T15:10:00Z"}},"title":"ConsentRevocationOriginEvent"},"status":{"type":"string","enum":["pending","applied","no_changes","failed"],"example":"applied"},"agreement_id":{"type":"string","nullable":true,"description":"Identificador del acuerdo resultante cuando hubo cambios efectivos.","example":"agr_1B2M2Y8AsgTpgAmY7PhCfg"},"agreement_version":{"type":"integer","nullable":true,"description":"Versión del acuerdo resultante cuando hubo cambios efectivos.","example":4},"created_at":{"type":"string","format":"date-time","example":"2026-02-11T15:10:00Z"}},"title":"CompanyConsentRevocation"}}}}}},"201":{"description":"Revocación creada y procesada","content":{"application/json":{"schema":{"type":"object","properties":{"consent_revocation":{"x-tags":["Consent revocations"],"type":"object","required":["id","subject_id","subject_type","consent_template_id","consent_template_version","reason_code","origin_event","status","created_at"],"properties":{"id":{"type":"string","description":"Identificador único de la revocación iniciada por la empresa.","example":"ccrev_1B2M2Y8AsgTpgAmY7PhCfg"},"subject_id":{"type":"string","description":"Identificador del sujeto afectado (`ent_` o `id_`).","example":"ent_1B2M2Y8AsgTpgAmY7PhCfg"},"subject_type":{"type":"string","enum":["Entity","Identity"],"example":"Entity"},"consent_template_id":{"type":"string","description":"Identificador del template de consentimiento.","example":"constpl_1B2M2Y8AsgTpgAmY7PhCfg"},"consent_template_version":{"type":"integer","example":3},"selected_scopes":{"type":"array","nullable":true,"items":{"type":"object","required":["scope_type","scope_id","scope_version"],"properties":{"scope_type":{"type":"string","enum":["product","branch"],"description":"Tipo de ámbito.","example":"product"},"scope_id":{"type":"string","description":"Identificador público tokenizado del recurso scope.","example":"prod_1B2M2Y8AsgTpgAmY7PhCfg"},"scope_version":{"type":"integer","description":"Versión del recurso scope persistida en esta versión del template.\nEste valor queda fijado al guardar y no se actualiza automáticamente cuando aparecen nuevas versiones del scope.\n","example":1}},"title":"ConsentTemplateScope"}},"reason_code":{"type":"string","example":"contract_ended"},"reason_text":{"type":"string","nullable":true,"example":"Contrato finalizado en sistema core"},"origin_event":{"type":"object","required":["system","event_id"],"properties":{"system":{"type":"string","description":"Sistema origen que dispara la revocación.","example":"core-banking"},"event_id":{"type":"string","description":"Identificador idempotente del evento origen.","example":"evt-12345"},"occurred_at":{"type":"string","format":"date-time","nullable":true,"description":"Fecha/hora de ocurrencia del evento origen.","example":"2026-02-11T15:10:00Z"}},"title":"ConsentRevocationOriginEvent"},"status":{"type":"string","enum":["pending","applied","no_changes","failed"],"example":"applied"},"agreement_id":{"type":"string","nullable":true,"description":"Identificador del acuerdo resultante cuando hubo cambios efectivos.","example":"agr_1B2M2Y8AsgTpgAmY7PhCfg"},"agreement_version":{"type":"integer","nullable":true,"description":"Versión del acuerdo resultante cuando hubo cambios efectivos.","example":4},"created_at":{"type":"string","format":"date-time","example":"2026-02-11T15:10:00Z"}},"title":"CompanyConsentRevocation"}}}}}},"400":{"description":"Error de parámetros del request","content":{"application/json":{"schema":{"type":"object","properties":{"type":{"type":"string","example":"invalid_request_error"},"title":{"type":"string","example":"Invalid parameter"},"status":{"type":"integer","example":400},"detail":{"type":"string","example":"Either identity_id, entity_id or user_reference is required"}}}}}},"401":{"description":"Error de autenticación","content":{"application/json":{"schema":{"type":"object","required":["type","title","status","detail"],"properties":{"type":{"type":"string","example":"authentication_error"},"title":{"type":"string","example":"Unauthorized"},"status":{"type":"integer","example":401},"detail":{"type":"string","example":"We could not authenticate your credentials. Please check the documentation at https://docs.soyio.id"}}}}}},"404":{"description":"Recurso no encontrado","content":{"application/json":{"schema":{"type":"object","required":["type","title","status","detail"],"properties":{"type":{"type":"string","example":"invalid_request_error"},"title":{"type":"string","example":"Resource not found"},"status":{"type":"integer","example":404},"detail":{"type":"string","example":"Couldn't find <resource> with id '<id>'. Please check your request and try again"}},"title":"NotFoundErrorSchema"}}}},"422":{"description":"Error de validación de guardrails de revocación","content":{"application/json":{"schema":{"type":"object","required":["type","title","status","errors"],"properties":{"type":{"type":"string","example":"validation_error"},"title":{"type":"string","example":"Validation error"},"status":{"type":"integer","example":422},"errors":{"type":"array","items":{"type":"string"}}},"title":"ValidationError"}}}}}}
>
  
</StatusCodes>


      