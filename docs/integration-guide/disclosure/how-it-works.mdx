# Cómo funciona

El módulo de Disclosure te permite solicitar a tus usuarios la revelación inicial de sus datos personales verificados, mejorando tu proceso de onboarding para adaptarlo a las regulaciones más estrictas de protección de datos personales.

A grandes rasgos, el módulo Disclosure te permite:
- **Verificar identidad**: Confirma que tus usuarios son quienes dicen ser
- **Obtener consentimiento**: Registra la autorización explícita para el uso de datos
- **Recolectar datos**: Recibe información verificada de tus usuarios

## El proceso de disclosure

El proceso de disclosure se compone de los siguientes pasos:

1. El usuario otorga su **consentimiento** para compartir datos
2. Se realiza la **verificación de identidad**
3. (Opcional) Se realiza un **match entre los datos verificados** y los datos almacenados en tu sistema.
4. Se crea una **identidad verificada** en el sistema
5. Se genera un **Agreement** con evidencia del proceso

### Descripción detallada

Este flujo comienza con la entrega de [consentimiento](../consent/introduction). El usuario verá los datos que estás solicitando y deberá confirmar su consentimiento para continuar.

Luego, se verificará la identidad del usuario. Al completar este paso, se creará una identidad con los datos verificados, que podrás consultar utilizando la API de Soyio.

Al finalizar el proceso de entrega de datos y consentimiento, se creará un [acuerdo (*Agreement*)](../general-concepts#agreement) y la evidencia asociada, que podrás utilizar para demostrar que el usuario otorgó su consentimiento libre, específico, inequívoco e informado.

### Match de datos

Opcionalmente, si el usuario creó una cuenta en tu sistema previamente y entregó datos de identificación, puedes incluir como parte del proceso que Soyio **verifique el match entre los datos verificados** que el usuario entrega en este proceso y la información almacenada en tu sistema. Si ocupas esta opción y el match no es exitoso, el **proceso concluye sin crear una identidad**.

Los campos disponibles para realizar el match son:

| Campo | Descripción |
| --- | --- |
| `cl_carnet_rut` | RUT chileno (sin puntos y con guión) |
| `name` | Nombres del usuario (separados por un espacio y sin tildes) |
| `last_name` | Apellidos del usuario (separados por un espacio y sin tildes)|
| `date_of_birth` | Fecha de nacimiento del usuario (formato: `YYYY-MM-DD`) |

### Estados

- **Pending**: Es el estado inicial de la solicitud. El proceso está listo para comenzar pero aún no se ha iniciado
- **Authenticating**: El usuario registrado está en proceso de Autenticación
- **Awaiting Permissions**: El sistema está esperando que el usuario otorgue los consentimientos necesarios. Se muestran los permisos y datos que se solicitan al usuario
- **Validating**: Se están validando los datos proporcionados por el usuario. Se verifica que la información cumpla con los requisitos establecidos
- **Awaiting missing data**: Se requiere información adicional del usuario. El sistema espera que el usuario complete los datos faltantes
- **Granted**: El proceso se ha completado exitosamente. Se han validado los datos y obtenido los consentimientos necesarios
- **Timed Out**: La solicitud ha expirado por inactividad. El proceso no se completó dentro del tiempo establecido
- **Failed**: La solicitud ha fallado por que los datos no hacen match. Este chequeo solo ocurre cuando se realiza un match de datos. El proceso no se completó exitosamente.

<details>
    <summary>Diagrama de estados</summary>
    <img src="/img/Diagrama Flujo Estados Disclosure.png" alt="disclosure flow" width="100%"/>
</details>

### Verificación gubernamental

Opcionalmente, habilita la **verificación gubernamental** como parte del proceso de validación de identidad. Esta funcionalidad consulta la base de datos del gobierno para verificar la validez actual del documento de identidad del usuario.

La verificación gubernamental es especialmente útil para detectar situaciones donde un documento puede ser técnicamente válido pero ha sido reportado como robado o perdido. Esto añade una capa adicional de seguridad al proceso de verificación de identidad.

:::info[Importante]
La verificación gubernamental puede requerir tiempo adicional para completarse, ya que depende de la disponibilidad y respuesta de los servicios gubernamentales. Considera el impacto en la experiencia del usuario al habilitar esta opción.
:::

:::tip[Configuración]
Puedes habilitar o deshabilitar la verificación gubernamental desde la [configuración de tu compañía](./configuration#verificación-gubernamental-disclosurevalidationgovernment_check).
:::
