import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# C贸mo funciona la autenticaci贸n

Soyio utiliza [autenticaci贸n fuerte](https://en.wikipedia.org/wiki/Strong_customer_authentication) (SCA, por sus siglas en ingl茅s) a trav茅s de passkeys y autenticaci贸n biom茅trica, para asegurar que **solo los usuarios autorizados realicen operaciones cr铆ticas**. Estos m茅todos de autenticaci贸n reducen significativamente el riesgo de fraude y acceso no autorizado, y cumplen con estrictas normativas de seguridad.

## Passkeys

Las passkeys son una alternativa moderna y segura a las contrase帽as tradicionales. Son credenciales digitales que:
- Se almacenan en el dispositivo del usuario.
- No necesitan memorizar contrase帽as complejas.
- Son 煤nicas para cada sitio web o aplicaci贸n.
- Est谩n protegidas por la biometr铆a del dispositivo (huella digital o reconocimiento facial).
- No pueden ser robadas o phisheadas como las contrase帽as tradicionales.

## Autenticaci贸n biom茅trica facial

La autenticaci贸n facial es un m茅todo de autenticaci贸n que utiliza la c谩mara del dispositivo para capturar una imagen del rostro del usuario. Luego, se extrae un vector 3D 煤nico del rostro para cada persona y se compara con un vector 3D guardado anteriormente en el sistema. Este m茅todo es seguro porque:
- El vector 3D es una representaci贸n matem谩tica detallada del rostro y no puede ser falsificado.
- No es posible volver a generar la foto del rostro a partir del vector 3D.
- El vector 3D viaja encriptado y se almacena encriptado en el sistema de Soyio.
- No se almacena la foto original del rostro de la persona en ning煤n sistema.
- La tasa de aceptaci贸n falsa de nuestro m茅todo es la m谩s baja del mercado (1/125,000,000).

## Descripci贸n del flujo

El proceso de autenticaci贸n sigue estos pasos:

1. Si el usuario tiene una llave de acceso (passkey) registrada, se le mostrar谩 la opci贸n de usarla para autenticarse.
2. Alternativamente, el usuario podr谩 siempre optar por usar una autenticaci贸n facial.
3. El sistema valida la autenticaci贸n y genera evidencia del proceso

:::info[Diagrama de secuencia]
Para ver el diagrama de secuencia completo del flujo de autenticaci贸n, consulta la secci贸n [Flujo de autenticaci贸n](./authenticate-users#flujo-de-autenticaci贸n) en la gu铆a de implementaci贸n.
:::

## Componentes del Sistema

### 1. Frontend (Tu Aplicaci贸n)
- **Inicializa** el widget de autenticaci贸n
- **Maneja eventos** del proceso de autenticaci贸n

### 2. Backend (Tu Servidor)
- **Crea solicitudes** de autenticaci贸n
- **Recibe webhooks** con resultados
- **Valida y procesa** los resultados de autenticaci贸n

### 3. Soyio API
- **Procesa solicitudes** de autenticaci贸n
- **Genera tokens** de autenticaci贸n
- **Env铆a webhooks** con resultados

### 4. Soyio Widget
- **Interfaz de usuario** para autenticaci贸n
- **Maneja passkeys** y autenticaci贸n biom茅trica
- **Comunica resultados** al frontend

## Estados del proceso

Durante el proceso de autenticaci贸n ocurren cambios de estado que pueden ser los siguientes:

### 1. Iniciado
- Se crea la solicitud de autenticaci贸n
- Se genera un `auth_request_id` 煤nico
- El widget se inicializa con el ID

### 2. En progreso
- El usuario interact煤a con el widget
- Se realizan las verificaciones de seguridad
- Se procesan los datos biom茅tricos

### 3. Exitoso
- La autenticaci贸n se completa correctamente
- Se genera evidencia del proceso
- Se env铆an webhooks de confirmaci贸n

### 4. Fallido
- La autenticaci贸n no se puede completar
- Se registran los motivos del fallo
- Se env铆an webhooks de error

## Seguridad y validaci贸n

### Tokens de seguridad
- **auth_request_id**: Identificador 煤nico de la solicitud de autenticaci贸n
- **identity_id**: Identificador del usuario autenticado
- **Recomendaci贸n**: Nunca almacenes o transmitas estos IDs de forma insegura.

### Validaci贸n de resultados
- **Verificaci贸n**: Recibe los resultados a trav茅s de webhooks y verifica la firma digital de Soyio.
- **Expiraci贸n de tokens**: Los intentos de autenticaci贸n expiran despu茅s de 5 minutos
- **Gesti贸n de reintentos**: Se controlan los intentos de autenticaci贸n por usuario/hora

## Consideraciones de seguridad

### 锔 Manejo seguro de datos
- **Nunca almacenes** el `auth_request_id` en logs o bases de datos sin cifrar
- **Transmite siempre** los datos de autenticaci贸n por HTTPS
- **Valida siempre** el resultado de la autenticaci贸n en tu backend

### 憋 L铆mites de tiempo
- **Timeout**: Los intentos de autenticaci贸n expiran despu茅s de 5 minutos
- **Rate limiting**: Existe un l铆mite de intentos por usuario/hora
- **Sesiones**: Las sesiones de autenticaci贸n tienen duraci贸n limitada

###  Mejores pr谩cticas
- **No reutilices** tokens de autenticaci贸n
- **Implementa logging** de eventos de seguridad
- **Monitorea** intentos de autenticaci贸n fallidos
- **Actualiza regularmente** las credenciales de API

## Pr贸ximos Pasos

- [Implementaci贸n paso a paso](./authenticate-users) - Implementa autenticaci贸n paso a paso
