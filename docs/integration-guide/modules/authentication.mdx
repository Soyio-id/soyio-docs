import SequenceDiagram from '../../../src/components/SequenceDiagram';

# Autenticación (Authentication)

Autentica a tus usuarios fácilmente usando un método seguro y modular. Este producto añade una capa extra de seguridad verificando la identidad de los usuarios y puedes utilizarlo para controlar el acceso en cualquier parte en tu aplicación. Es ideal para controlar el acceso a datos sensibles o antes de permitir transacciones importantes.

## ¿Cómo funciona?

Soyio utiliza Autenticación Fuerte (SCA, por sus siglas en inglés) o autenticación biométrica, para asegurar que solo los usuarios autorizados realicen operaciones críticas. Esta solución de autenticación reduce significativamente el riesgo de fraude y acceso no autorizado, cumpliendo con estrictas normativas de seguridad.

Cuando un usuario necesite autenticarse, primero se le ofrecerá la opción de usar su llave de acceso (passkey) guardada en su dispositivo. Si no tiene una passkey registrada, podrá optar por la autenticación facial.

El flujo que integrarás es el siguiente:

<SequenceDiagram
  actors={[
    { id: 'frontend', label: 'Frontend' },
    { id: 'backend', label: 'Backend' },
    { id: 'soyio_api', label: 'Soyio API' },
    { id: 'soyio_widget', label: 'Soyio Widget' },
  ]}
  actions={[
    {
      from: 'backend',
      to: 'soyio_api',
      label: 'Crear intento de autenticación'
    },
    {
      from: 'soyio_api',
      to: 'backend',
      label: 'Retorna `auth_attempt_id`'
    },
    {
      from: 'frontend',
      to: 'soyio_widget',
      label: 'Iniciar widget con `auth_attempt_id`'
    },
    {
      from: 'soyio_widget',
      to: 'frontend',
      label: 'Evento `WIDGET_OPENED`',
      isDashed: true,
    },
    {
      from: 'soyio_widget',
      to: 'soyio_widget',
      label: 'Usuario completa autenticación (passkey o biométrica)'
    },
    {
      from: 'soyio_widget',
      to: 'frontend',
      label: 'Evento `AUTH_SUCCESSFUL`',
      isDashed: true,
    },
    {
      from: 'soyio_api',
      to: 'backend',
      label: 'Webhook: `auth_attempt.successful`',
      isDashed: true,
      webhook: 'auth_attempt.successful'
    },
    {
      from: 'backend',
      to: 'soyio_api',
      label: 'Obtener resultado de autenticación'
    },
    {
      from: 'soyio_api',
      to: 'backend',
      label: 'Retorna resultado de autenticación'
    }
  ]}
/>

## Pre requisitos

1. El usuario debe tener una [identidad creada en el sistema](./disclosure.md).
2. Tener el [SDK](../quickstart.md) instalado en tu sitio o aplicación.
3. Tener un [Webhook](../../api/webhooks.md) configurado en tu cuenta.

## Paso a paso

### 1. Crea un intento de autenticación

### 2. Inicia el proceso de autenticación

### 3. Escucha los eventos
